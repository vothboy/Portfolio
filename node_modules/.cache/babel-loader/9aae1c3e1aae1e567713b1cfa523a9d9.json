{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"C:\\\\Users\\\\vothb\\\\Desktop\\\\School\\\\Quarter_5\\\\CIS259\\\\Plankcooking-microservices\\\\Plankcooking\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:\\\\Users\\\\vothb\\\\Desktop\\\\School\\\\Quarter_5\\\\CIS259\\\\Plankcooking-microservices\\\\Plankcooking\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"C:\\\\Users\\\\vothb\\\\Desktop\\\\School\\\\Quarter_5\\\\CIS259\\\\Plankcooking-microservices\\\\Plankcooking\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"C:\\\\Users\\\\vothb\\\\Desktop\\\\School\\\\Quarter_5\\\\CIS259\\\\Plankcooking-microservices\\\\Plankcooking\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"C:\\\\Users\\\\vothb\\\\Desktop\\\\School\\\\Quarter_5\\\\CIS259\\\\Plankcooking-microservices\\\\Plankcooking\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/inherits\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Parser = void 0;\n\nvar _events = require(\"events\");\n\nvar _streamParser = _interopRequireDefault(require(\"./stream-parser\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/*\n  Buffers are thrown at the parser (by calling addBuffer).\n  Tokens are parsed from the buffer until there are no more tokens in\n  the buffer, or there is just a partial token left.\n  If there is a partial token left over, then it is kept until another\n  buffer is added, which should contain the remainder of the partial\n  token, along with (perhaps) more tokens.\n  The partial token and the new buffer are concatenated, and the token\n  parsing resumes.\n */\n\n\nvar Parser = /*#__PURE__*/function (_events$EventEmitter) {\n  _inherits(Parser, _events$EventEmitter);\n\n  function Parser(debug, colMetadata, options) {\n    var _this;\n\n    _classCallCheck(this, Parser);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Parser).call(this));\n    _this.debug = void 0;\n    _this.colMetadata = void 0;\n    _this.options = void 0;\n    _this.parser = void 0;\n    _this.debug = debug;\n    _this.colMetadata = colMetadata;\n    _this.options = options;\n    _this.parser = new _streamParser.default(_this.debug, _this.colMetadata, _this.options);\n\n    _this.parser.on('data', function (token) {\n      if (token.event) {\n        _this.emit(token.event, token);\n      }\n    });\n\n    _this.parser.on('drain', function () {\n      _this.emit('drain');\n    });\n\n    return _this;\n  } // Returns false to apply backpressure.\n\n\n  _createClass(Parser, [{\n    key: \"addBuffer\",\n    value: function addBuffer(buffer) {\n      return this.parser.write(buffer);\n    } // Writes an end-of-message (EOM) marker into the parser transform input\n    // queue. StreamParser will emit a 'data' event with an 'endOfMessage'\n    // pseudo token when the EOM marker has passed through the transform stream.\n    // Returns false to apply backpressure.\n\n  }, {\n    key: \"addEndOfMessageMarker\",\n    value: function addEndOfMessageMarker() {\n      return this.parser.write(this.parser.endOfMessageMarker);\n    }\n  }, {\n    key: \"isEnd\",\n    value: function isEnd() {\n      return this.parser.buffer.length === this.parser.position;\n    } // Temporarily suspends the token stream parser transform from emitting events.\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.parser.pause();\n    } // Resumes the token stream parser transform.\n\n  }, {\n    key: \"resume\",\n    value: function resume() {\n      this.parser.resume();\n    }\n  }]);\n\n  return Parser;\n}(_events.EventEmitter);\n\nexports.Parser = Parser;","map":null,"metadata":{},"sourceType":"script"}
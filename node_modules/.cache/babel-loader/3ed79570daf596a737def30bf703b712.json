{"ast":null,"code":"\"use strict\";\n\nvar _createClass = require(\"C:\\\\Users\\\\vothb\\\\Desktop\\\\School\\\\Quarter_5\\\\CIS259\\\\Plankcooking-microservices\\\\Plankcooking\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"C:\\\\Users\\\\vothb\\\\Desktop\\\\School\\\\Quarter_5\\\\CIS259\\\\Plankcooking-microservices\\\\Plankcooking\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"C:\\\\Users\\\\vothb\\\\Desktop\\\\School\\\\Quarter_5\\\\CIS259\\\\Plankcooking-microservices\\\\Plankcooking\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"C:\\\\Users\\\\vothb\\\\Desktop\\\\School\\\\Quarter_5\\\\CIS259\\\\Plankcooking-microservices\\\\Plankcooking\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/inherits\");\n\nvar _classCallCheck = require(\"C:\\\\Users\\\\vothb\\\\Desktop\\\\School\\\\Quarter_5\\\\CIS259\\\\Plankcooking-microservices\\\\Plankcooking\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\n\nvar _defineProperty = require(\"C:\\\\Users\\\\vothb\\\\Desktop\\\\School\\\\Quarter_5\\\\CIS259\\\\Plankcooking-microservices\\\\Plankcooking\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/defineProperty\");\n\nvar _tokenParsers;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _jsbi = _interopRequireDefault(require(\"jsbi\"));\n\nvar _readableStream = require(\"readable-stream\");\n\nvar _token = require(\"./token\");\n\nvar _colmetadataTokenParser = _interopRequireDefault(require(\"./colmetadata-token-parser\"));\n\nvar _doneTokenParser = require(\"./done-token-parser\");\n\nvar _envChangeTokenParser = _interopRequireDefault(require(\"./env-change-token-parser\"));\n\nvar _infoerrorTokenParser = require(\"./infoerror-token-parser\");\n\nvar _fedauthInfoParser = _interopRequireDefault(require(\"./fedauth-info-parser\"));\n\nvar _featureExtAckParser = _interopRequireDefault(require(\"./feature-ext-ack-parser\"));\n\nvar _loginackTokenParser = _interopRequireDefault(require(\"./loginack-token-parser\"));\n\nvar _orderTokenParser = _interopRequireDefault(require(\"./order-token-parser\"));\n\nvar _returnstatusTokenParser = _interopRequireDefault(require(\"./returnstatus-token-parser\"));\n\nvar _returnvalueTokenParser = _interopRequireDefault(require(\"./returnvalue-token-parser\"));\n\nvar _rowTokenParser = _interopRequireDefault(require(\"./row-token-parser\"));\n\nvar _nbcrowTokenParser = _interopRequireDefault(require(\"./nbcrow-token-parser\"));\n\nvar _sspiTokenParser = _interopRequireDefault(require(\"./sspi-token-parser\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar tokenParsers = (_tokenParsers = {}, _defineProperty(_tokenParsers, _token.TYPE.COLMETADATA, _colmetadataTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.DONE, _doneTokenParser.doneParser), _defineProperty(_tokenParsers, _token.TYPE.DONEINPROC, _doneTokenParser.doneInProcParser), _defineProperty(_tokenParsers, _token.TYPE.DONEPROC, _doneTokenParser.doneProcParser), _defineProperty(_tokenParsers, _token.TYPE.ENVCHANGE, _envChangeTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.ERROR, _infoerrorTokenParser.errorParser), _defineProperty(_tokenParsers, _token.TYPE.FEDAUTHINFO, _fedauthInfoParser.default), _defineProperty(_tokenParsers, _token.TYPE.FEATUREEXTACK, _featureExtAckParser.default), _defineProperty(_tokenParsers, _token.TYPE.INFO, _infoerrorTokenParser.infoParser), _defineProperty(_tokenParsers, _token.TYPE.LOGINACK, _loginackTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.ORDER, _orderTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.RETURNSTATUS, _returnstatusTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.RETURNVALUE, _returnvalueTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.ROW, _rowTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.NBCROW, _nbcrowTokenParser.default), _defineProperty(_tokenParsers, _token.TYPE.SSPI, _sspiTokenParser.default), _tokenParsers);\n\nvar EndOfMessageMarker = function EndOfMessageMarker() {\n  _classCallCheck(this, EndOfMessageMarker);\n};\n\nvar Parser = /*#__PURE__*/function (_readableStream$Trans) {\n  _inherits(Parser, _readableStream$Trans);\n\n  function Parser(debug, colMetadata, options) {\n    var _this;\n\n    _classCallCheck(this, Parser);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Parser).call(this, {\n      objectMode: true\n    }));\n    _this.debug = void 0;\n    _this.colMetadata = void 0;\n    _this.options = void 0;\n    _this.endOfMessageMarker = void 0;\n    _this.buffer = void 0;\n    _this.position = void 0;\n    _this.suspended = void 0;\n    _this.next = void 0;\n    _this.debug = debug;\n    _this.colMetadata = colMetadata;\n    _this.options = options;\n    _this.endOfMessageMarker = new EndOfMessageMarker();\n    _this.buffer = Buffer.alloc(0);\n    _this.position = 0;\n    _this.suspended = false;\n    _this.next = undefined;\n    return _this;\n  }\n\n  _createClass(Parser, [{\n    key: \"_transform\",\n    value: function _transform(input, _encoding, done) {\n      if (input instanceof EndOfMessageMarker) {\n        return done(undefined, new _token.EndOfMessageToken());\n      }\n\n      if (this.position === this.buffer.length) {\n        this.buffer = input;\n      } else {\n        this.buffer = Buffer.concat([this.buffer.slice(this.position), input]);\n      }\n\n      this.position = 0;\n\n      if (this.suspended) {\n        // Unsuspend and continue from where ever we left off.\n        this.suspended = false;\n        var next = this.next;\n        next();\n      } // If we're no longer suspended, parse new tokens\n\n\n      if (!this.suspended) {\n        // Start the parser\n        this.parseTokens();\n      }\n\n      done();\n    }\n  }, {\n    key: \"parseTokens\",\n    value: function parseTokens() {\n      var _this2 = this;\n\n      var doneParsing = function doneParsing(token) {\n        if (token) {\n          if (token instanceof _token.ColMetadataToken) {\n            _this2.colMetadata = token.columns;\n          }\n\n          _this2.push(token);\n        }\n      };\n\n      while (!this.suspended && this.position + 1 <= this.buffer.length) {\n        var type = this.buffer.readUInt8(this.position);\n        this.position += 1;\n\n        if (tokenParsers[type]) {\n          tokenParsers[type](this, this.colMetadata, this.options, doneParsing);\n        } else {\n          this.emit('error', new Error('Unknown type: ' + type));\n        }\n      }\n    }\n  }, {\n    key: \"suspend\",\n    value: function suspend(next) {\n      this.suspended = true;\n      this.next = next;\n    }\n  }, {\n    key: \"awaitData\",\n    value: function awaitData(length, callback) {\n      var _this3 = this;\n\n      if (this.position + length <= this.buffer.length) {\n        callback();\n      } else {\n        this.suspend(function () {\n          _this3.awaitData(length, callback);\n        });\n      }\n    }\n  }, {\n    key: \"readInt8\",\n    value: function readInt8(callback) {\n      var _this4 = this;\n\n      this.awaitData(1, function () {\n        var data = _this4.buffer.readInt8(_this4.position);\n\n        _this4.position += 1;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt8\",\n    value: function readUInt8(callback) {\n      var _this5 = this;\n\n      this.awaitData(1, function () {\n        var data = _this5.buffer.readUInt8(_this5.position);\n\n        _this5.position += 1;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt16LE\",\n    value: function readInt16LE(callback) {\n      var _this6 = this;\n\n      this.awaitData(2, function () {\n        var data = _this6.buffer.readInt16LE(_this6.position);\n\n        _this6.position += 2;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt16BE\",\n    value: function readInt16BE(callback) {\n      var _this7 = this;\n\n      this.awaitData(2, function () {\n        var data = _this7.buffer.readInt16BE(_this7.position);\n\n        _this7.position += 2;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt16LE\",\n    value: function readUInt16LE(callback) {\n      var _this8 = this;\n\n      this.awaitData(2, function () {\n        var data = _this8.buffer.readUInt16LE(_this8.position);\n\n        _this8.position += 2;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt16BE\",\n    value: function readUInt16BE(callback) {\n      var _this9 = this;\n\n      this.awaitData(2, function () {\n        var data = _this9.buffer.readUInt16BE(_this9.position);\n\n        _this9.position += 2;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt32LE\",\n    value: function readInt32LE(callback) {\n      var _this10 = this;\n\n      this.awaitData(4, function () {\n        var data = _this10.buffer.readInt32LE(_this10.position);\n\n        _this10.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt32BE\",\n    value: function readInt32BE(callback) {\n      var _this11 = this;\n\n      this.awaitData(4, function () {\n        var data = _this11.buffer.readInt32BE(_this11.position);\n\n        _this11.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt32LE\",\n    value: function readUInt32LE(callback) {\n      var _this12 = this;\n\n      this.awaitData(4, function () {\n        var data = _this12.buffer.readUInt32LE(_this12.position);\n\n        _this12.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt32BE\",\n    value: function readUInt32BE(callback) {\n      var _this13 = this;\n\n      this.awaitData(4, function () {\n        var data = _this13.buffer.readUInt32BE(_this13.position);\n\n        _this13.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readBigInt64LE\",\n    value: function readBigInt64LE(callback) {\n      var _this14 = this;\n\n      this.awaitData(8, function () {\n        var result = _jsbi.default.add(_jsbi.default.leftShift(_jsbi.default.BigInt(_this14.buffer[_this14.position + 4] + _this14.buffer[_this14.position + 5] * Math.pow(2, 8) + _this14.buffer[_this14.position + 6] * Math.pow(2, 16) + (_this14.buffer[_this14.position + 7] << 24) // Overflow\n        ), _jsbi.default.BigInt(32)), _jsbi.default.BigInt(_this14.buffer[_this14.position] + _this14.buffer[_this14.position + 1] * Math.pow(2, 8) + _this14.buffer[_this14.position + 2] * Math.pow(2, 16) + _this14.buffer[_this14.position + 3] * Math.pow(2, 24)));\n\n        _this14.position += 8;\n        callback(result);\n      });\n    }\n  }, {\n    key: \"readInt64LE\",\n    value: function readInt64LE(callback) {\n      var _this15 = this;\n\n      this.awaitData(8, function () {\n        var data = Math.pow(2, 32) * _this15.buffer.readInt32LE(_this15.position + 4) + ((_this15.buffer[_this15.position + 4] & 0x80) === 0x80 ? 1 : -1) * _this15.buffer.readUInt32LE(_this15.position);\n\n        _this15.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readInt64BE\",\n    value: function readInt64BE(callback) {\n      var _this16 = this;\n\n      this.awaitData(8, function () {\n        var data = Math.pow(2, 32) * _this16.buffer.readInt32BE(_this16.position) + ((_this16.buffer[_this16.position] & 0x80) === 0x80 ? 1 : -1) * _this16.buffer.readUInt32BE(_this16.position + 4);\n\n        _this16.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readBigUInt64LE\",\n    value: function readBigUInt64LE(callback) {\n      var _this17 = this;\n\n      this.awaitData(8, function () {\n        var low = _jsbi.default.BigInt(_this17.buffer.readUInt32LE(_this17.position));\n\n        var high = _jsbi.default.BigInt(_this17.buffer.readUInt32LE(_this17.position + 4));\n\n        _this17.position += 8;\n        callback(_jsbi.default.add(low, _jsbi.default.leftShift(high, _jsbi.default.BigInt(32))));\n      });\n    }\n  }, {\n    key: \"readUInt64LE\",\n    value: function readUInt64LE(callback) {\n      var _this18 = this;\n\n      this.awaitData(8, function () {\n        var data = Math.pow(2, 32) * _this18.buffer.readUInt32LE(_this18.position + 4) + _this18.buffer.readUInt32LE(_this18.position);\n\n        _this18.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt64BE\",\n    value: function readUInt64BE(callback) {\n      var _this19 = this;\n\n      this.awaitData(8, function () {\n        var data = Math.pow(2, 32) * _this19.buffer.readUInt32BE(_this19.position) + _this19.buffer.readUInt32BE(_this19.position + 4);\n\n        _this19.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readFloatLE\",\n    value: function readFloatLE(callback) {\n      var _this20 = this;\n\n      this.awaitData(4, function () {\n        var data = _this20.buffer.readFloatLE(_this20.position);\n\n        _this20.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readFloatBE\",\n    value: function readFloatBE(callback) {\n      var _this21 = this;\n\n      this.awaitData(4, function () {\n        var data = _this21.buffer.readFloatBE(_this21.position);\n\n        _this21.position += 4;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readDoubleLE\",\n    value: function readDoubleLE(callback) {\n      var _this22 = this;\n\n      this.awaitData(8, function () {\n        var data = _this22.buffer.readDoubleLE(_this22.position);\n\n        _this22.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readDoubleBE\",\n    value: function readDoubleBE(callback) {\n      var _this23 = this;\n\n      this.awaitData(8, function () {\n        var data = _this23.buffer.readDoubleBE(_this23.position);\n\n        _this23.position += 8;\n        callback(data);\n      });\n    }\n  }, {\n    key: \"readUInt24LE\",\n    value: function readUInt24LE(callback) {\n      var _this24 = this;\n\n      this.awaitData(3, function () {\n        var low = _this24.buffer.readUInt16LE(_this24.position);\n\n        var high = _this24.buffer.readUInt8(_this24.position + 2);\n\n        _this24.position += 3;\n        callback(low | high << 16);\n      });\n    }\n  }, {\n    key: \"readUInt40LE\",\n    value: function readUInt40LE(callback) {\n      var _this25 = this;\n\n      this.awaitData(5, function () {\n        var low = _this25.buffer.readUInt32LE(_this25.position);\n\n        var high = _this25.buffer.readUInt8(_this25.position + 4);\n\n        _this25.position += 5;\n        callback(0x100000000 * high + low);\n      });\n    }\n  }, {\n    key: \"readUNumeric64LE\",\n    value: function readUNumeric64LE(callback) {\n      var _this26 = this;\n\n      this.awaitData(8, function () {\n        var low = _this26.buffer.readUInt32LE(_this26.position);\n\n        var high = _this26.buffer.readUInt32LE(_this26.position + 4);\n\n        _this26.position += 8;\n        callback(0x100000000 * high + low);\n      });\n    }\n  }, {\n    key: \"readUNumeric96LE\",\n    value: function readUNumeric96LE(callback) {\n      var _this27 = this;\n\n      this.awaitData(12, function () {\n        var dword1 = _this27.buffer.readUInt32LE(_this27.position);\n\n        var dword2 = _this27.buffer.readUInt32LE(_this27.position + 4);\n\n        var dword3 = _this27.buffer.readUInt32LE(_this27.position + 8);\n\n        _this27.position += 12;\n        callback(dword1 + 0x100000000 * dword2 + 0x100000000 * 0x100000000 * dword3);\n      });\n    }\n  }, {\n    key: \"readUNumeric128LE\",\n    value: function readUNumeric128LE(callback) {\n      var _this28 = this;\n\n      this.awaitData(16, function () {\n        var dword1 = _this28.buffer.readUInt32LE(_this28.position);\n\n        var dword2 = _this28.buffer.readUInt32LE(_this28.position + 4);\n\n        var dword3 = _this28.buffer.readUInt32LE(_this28.position + 8);\n\n        var dword4 = _this28.buffer.readUInt32LE(_this28.position + 12);\n\n        _this28.position += 16;\n        callback(dword1 + 0x100000000 * dword2 + 0x100000000 * 0x100000000 * dword3 + 0x100000000 * 0x100000000 * 0x100000000 * dword4);\n      });\n    } // Variable length data\n\n  }, {\n    key: \"readBuffer\",\n    value: function readBuffer(length, callback) {\n      var _this29 = this;\n\n      this.awaitData(length, function () {\n        var data = _this29.buffer.slice(_this29.position, _this29.position + length);\n\n        _this29.position += length;\n        callback(data);\n      });\n    } // Read a Unicode String (BVARCHAR)\n\n  }, {\n    key: \"readBVarChar\",\n    value: function readBVarChar(callback) {\n      var _this30 = this;\n\n      this.readUInt8(function (length) {\n        _this30.readBuffer(length * 2, function (data) {\n          callback(data.toString('ucs2'));\n        });\n      });\n    } // Read a Unicode String (USVARCHAR)\n\n  }, {\n    key: \"readUsVarChar\",\n    value: function readUsVarChar(callback) {\n      var _this31 = this;\n\n      this.readUInt16LE(function (length) {\n        _this31.readBuffer(length * 2, function (data) {\n          callback(data.toString('ucs2'));\n        });\n      });\n    } // Read binary data (BVARBYTE)\n\n  }, {\n    key: \"readBVarByte\",\n    value: function readBVarByte(callback) {\n      var _this32 = this;\n\n      this.readUInt8(function (length) {\n        _this32.readBuffer(length, callback);\n      });\n    } // Read binary data (USVARBYTE)\n\n  }, {\n    key: \"readUsVarByte\",\n    value: function readUsVarByte(callback) {\n      var _this33 = this;\n\n      this.readUInt16LE(function (length) {\n        _this33.readBuffer(length, callback);\n      });\n    }\n  }]);\n\n  return Parser;\n}(_readableStream.Transform);\n\nvar _default = Parser;\nexports.default = _default;\nmodule.exports = Parser;","map":null,"metadata":{},"sourceType":"script"}